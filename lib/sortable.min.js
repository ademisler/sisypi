/**!
 * Sortable
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).Sortable=e()}(this,function(){"use strict";function t(t){return(t=t.touches)&&t[0]||t}function e(t,e){for(var n=0;n<t.length;n++)if(!e(t[n],n))return!1;return!0}function n(t,e){var n=g(t),o=n.getElementsByTagName(e);return Array.prototype.slice.call(o)}function o(t,e){for(var n in t){var o=r(t,n);o&&e(o,n)}}function r(t,e){return t.children[e]}function i(t,e){if(e){for(var n,o=e.length,r=o;o--;){var i="border-box"===t.css(e[o],"box-sizing"),a=V(t,e[o]);if(i){var l=parseFloat(t.css(e[o],"border-left-width"))+parseFloat(t.css(e[o],"border-right-width")),s=parseFloat(t.css(e[o],"border-top-width"))+parseFloat(t.css(e[o],"border-bottom-width"));n={width:a.width-l,height:a.height-s}}else n=a;r.push(n)}return r}return[]}}function a(t,e){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))}function l(t,e,n){return e<t?t:n<e?n:e}function s(t,e,n,o){return t.left+t.width>e&&t.left<e+n&&t.top+t.height>o&&t.top<o+n}function d(t,e,n){var o=n?t.left-e.left:t.top-e.top;return o>=0&&o<5}function c(t,e){for(var n=0;n<e.length;n++){if(s(e[n],t.left,t.width,t.top,t.height))return e[n]}return null}function u(t,e){for(var o,r,i,a=e.length-1;a>-1;a--){var l=e[a].rect;if(d(t,l,!1)){if(t.left<l.left)return r=l;o=l}else if(d(t,l,!0)){if(t.top<l.top)return i=l;o=l}if(o)return o;if(t.top<l.top&&t.left<l.left)return o=l}return r||i||o}function f(t,e){for(var n=0;n<e.length;n++){var o=e[n];if(o.node===t)return o}}function h(t,e,n){var o,r;if(void 0===n&&(n=!1),"closest"in t.node)return t.node.closest(e);for(r=t.node;r;){if(r.nodeType===Node.ELEMENT_NODE&&b(r,e)){o=r;break}if(n)break;r=r.parentNode}return o}function p(t,e){if(!t.animated)return!1;for(var n=0;n.length;n++)if(e.indexOf(t.children[n].node)>-1)return!0;return!1}function g(t){return t.node}function m(t){t.sort(function(t,e){return t.rect.top-e.rect.top});var e=t.length;if(!e)return;for(var n,o=[],r=0;r<e;r++)n=t[r].rect.top,(o.length>0&&o[o.length-1].top<n||o.length<1)&&o.push({top:n,rows:[]}),o[o.length-1].rows.push(t[r]);t.length=0;for(var r=0;r<o.length;r++){o[r].rows.sort(function(t,e){return t.rect.left-e.rect.left});for(var i=0;i<o[r].rows.length;i++)t.push(o[r].rows[i])}}function v(t,e,n){var o=t.length;if(o){if(e.sortable)return void t.splice(e.index,1);var r=g(n);for(var i=0;i<o;i++)if(r===g(t[i])){t.splice(i,1);break}}else t.push(n)}function y(t,e,n){var o=t[n];t[n]=t[e],t[e]=o}function b(t,e){if(t){e=e.split(".");var n=e.shift().toUpperCase(),o=new RegExp("\\s("+e.join("|")+")\\s","g");return!(""===e[0]&&"*"!==n||n&&t.nodeName.toUpperCase()!=n)&&(!e.length||((" "+t.className+" ").replace(/[\t\r\n\f]/g," ").match(o)||[]).length==e.length)}}function _(t,e){return!!e&&t.className.split(/\s+/).indexOf(e)>-1}function w(t,e){var n=t.className;n.indexOf(e)<0&&(t.className+=" "+e)}function E(t,e){var n=t.className.split(/\s+/).indexOf(e);n>-1&&t.classList.remove(e)}function S(t,e,n){if(t){if(t.classList)t.classList[n?"add":"remove"](e);else{var o=(" "+t.className+" ").replace(/[\t\r\n\f]/g," ").indexOf(" "+e+" ")>-1;n?o||(t.className+=" "+e):o&&(t.className=t.className.replace(new RegExp("(\\s|^)"+e+"(\\s|$)")," ").trim())}}}function C(t,e,n){var o=t&&t.style;if(o)if(void 0===n)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(t,""):window.getComputedStyle&&(n=window.getComputedStyle(t,"")),e.indexOf("background")>-1?n.getPropertyValue(e):n[e];else o[e]=n}function x(t,e,n){if(t){var o=t.getElementsByTagName(e),r=0,i=o.length;if(n)for(;r<i;r++)n(o[r],r);return o}}function T(t,e){t&&t.parentNode&&t.parentNode.removeChild(t)}function N(t,e,n,o,r){if(e.sortable)return e.sortable.options.group.pull&&o?void(g(e).ghost=n):void T(n);o||T(n)}function D(t,e){return t.compareDocumentPosition?t.compareDocumentPosition(e):t.contains?16===(16&t.compareDocumentPosition(e)):void 0}function A(t,e){return-1<(" "+(t.className||"")+" ").indexOf(" "+e+" ")}function M(t,e,n){if(e){if(">*"===e.substring(0,2)&&(e=e.substring(2)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch(t){return!1}return!1}}function O(t,e,n,o){if(t){for(n=n||document,e=e.split(".");t&&t!==n;){if("*"===e[0]||t.nodeName.toUpperCase()===e[0].toUpperCase()&&(!e[1]||A(t,e[1]))){if(o)return t;if(t===n)return null}t=t.parentNode}return null}}function k(t,e,n,o,r){if(t){var i=arguments.length;for(t.dispatchEvent(function(t,e,n){var o;if(n=n||{},"function"==typeof Event?o=new Event(t,n):"function"==typeof CustomEvent?o=new CustomEvent(t,{bubbles:n.bubbles,cancelable:n.cancelable}):(o=document.createEvent("Event")).initEvent(t,n.bubbles,n.cancelable),"object"==typeof e)for(var r in e)o[r]=e[r];return o}(e,n,r));i--,o;)}}function I(t,e){e.sortable=t;for(var n=e.children,o=0;o<n.length;o++)n[o].sortable=t}var P,L,B,R,j,F,G,V,W,z,Y,H,U,X,K,q,J,$,Q,Z,tt,et,nt,ot,rt,it,at,lt,st,dt,ct,ut,ft,ht,pt,gt="Sortable"+(new Date).getTime();function mt(t,e){t.style.cssText=e}function vt(t,e,n){t.style.setProperty(e,n)}function yt(t,e){var n=t.originalEvent,o=t.putSortable||t.nativeDraggable||L.sortable;if(n)if(!window.TouchEvent||!n.touches||!n.touches.length){e=e||{};var r=n.touches&&n.touches[0]||n;t.touch=r,t.clientX=r.clientX,t.clientY=r.clientY,t.pageX=r.pageX,t.pageY=r.pageY,t.screenX=r.screenX,t.screenY=r.screenY,o&&k(o.el,o.options.onChoose,t),e.onChoose&&e.onChoose.call(o,t)}}}function bt(t){var e,n=t.srcElement||t.target;if(Q){var o=n;Z&&Z.contains(o)||o===Z||(Z.onSpill(t),_t(t))}}function _t(t){k(Z.el,Z.options.onUnchoose,t),Z.options.onUnchoose&&Z.options.onUnchoose.call(Z,t),Z.options.group.revertDrag&&Z.revert(),Z=null}function wt(t,e){var n;n=t,o(n.children,function(t){t.node.sortable&&t.node.sortable.destroy()}),t.node.sortable=null}function Et(t){var e=t.ownerDocument,n=t.type.toLowerCase();return"html"===n||"body"===n?e.documentElement:t}function St(t,e,n,o){t.sortable=this,this.el=t,this.options=e=e||{},this.ownerDocument=t.ownerDocument;var r={store:null,group:"default",handle:null,sort:!0,disabled:!1,animation:0,ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:".sortable-ignore",filter:".sortable-filter",preventOnFilter:!0,draggable:null,setData:function(t,e){t.setData("Text",e.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,touchStartThreshold:parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0}};for(var i in r)!(i in e)&&(e[i]=r[i]);for(var a in this)"_"===a.charAt(0)&&"function"==typeof this[a]&&(this[a]=this[a].bind(this));this.nativeDraggable="draggable"in document.createElement("div"),this.nativeDraggable&&!e.forceFallback&&(this.nativeDraggable=!1,x(t,"img",function(t){t.draggable=!1})),e.handle&&(this.options.handle=e.handle.split(".")[0]);var l=this;["onChoose","onStart","onEnd","onAdd","onUpdate","onSort","onRemove","onFilter","onMove","onClone","onSpill"].forEach(function(t){l.options[t]&&"function"==typeof l.options[t]&&(l["_"+t]=l.options[t])}),this.options.store&&this.options.store.get&&this.sort(this.options.store.get(this)||[]),o(this.el.children,function(t,e){t.sortable=l,t.option=l.options,t.group=l.options.group})}"function"==typeof window.CustomEvent?window.CustomEvent:function(t,e){e=e||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),n};var Ct=function(t,e){var n=document.createEvent("Event");return n.initEvent(t,!0,!0),n.item=e,n.from=P,n};function xt(t){P=t.el,L=t.el,B=t.options,R=g(L),j=B.group,F={x:0,y:0},G=!1,tt=[],et=L.getBoundingClientRect()}function Tt(e){var n=O(e.target,B.draggable,L);n&&(Q||!n.animated&&(n!==R&&(!L.contains(n)||!B.handle||O(e.target,B.handle,L))&&!O(e.target,B.filter,L,{ignore:B.ignore})&&(Q=n,P=L,xt(L),yt(e))))}function Nt(t){if(Q){var e=t.type,n=t.touches&&t.touches[0];if(!n||"touchend"!==e&&"touchcancel"!==e&&"touchmove"!==e){(L.options.onFilter||function(){}).call(L,t),L.options.preventOnFilter&&t.preventDefault();var o=Q,r=P.children,i=P.indexOf(o),a=L.options.group;o.sortableStartData={index:i,group:a,item:o},o.sortableAddData=null;var l=L,s=a.pull;if(l.options.group.pull)if(!0===s||"clone"===s)o.clone=o.cloneNode(!0),k(o,"clone",o.clone),l._onClone&&l._onClone.call(l,{item:o,clone:o.clone});else{var d=o.parentNode.removeChild(o);o.sortableTranferData=d,l._onRemove&&l._onRemove.call(l,{item:o,from:P}),l.options.setData(t.dataTransfer,o)}S(o,L.options.chosenClass,!0),L._onChoose&&L._onChoose.call(l,{item:o}),L._onStart&&L._onStart.call(l,{item:o}),t.dataTransfer.effectAllowed="move",Z=L,tt=i}}}function Dt(t){if(Z)if(Z.nativeDraggable&&t.target.isContentEditable)t.preventDefault();else{t.preventDefault(),t.stopPropagation();var e=t.touches?t.touches[0]:t,n=Et(e.target);if(!H){var o=Z.options,r=o.fallbackTolerance,i=o.fallbackOffset,a=e.clientX,l=e.clientY,s=Q.clientWidth,d=Q.clientHeight;if(Math.abs(e.screenX-at.x)>r||Math.abs(e.screenY-at.y)>r){var c=o.fallbackClass;Z.el.className+=" "+c,S(Q,"sortable-drag",!0),Q.style.width=s+"px",Q.style.height=d+"px",mt(Q,"position: fixed;top: ".(l-i.y-d/2)."px; left: ".(a-i.x-s/2)."px;"),o.fallbackOnBody&&document.body.appendChild(Q),k(Z.el,"start",Q),H=!0}}if(H){a=e.clientX,l=e.clientY;var u=a-lt.x,f=l-lt.y,h="translate3d("u."px, "f."px, 0)";mt(Q,"transform",h,"-webkit-transform",h),lt={x:a,y:l};var p=O(e.target,null,Z.el),g=c(e,Z.el.children);k(p,"dragover",t),g&&(p=g),k(p,"dragenter",t),Z.options.onMove&&Z.options.onMove.call(Z.el,t),At(t,n)}}else Z||Tt(t)}function At(t,e){if(Z)if(e!==$){$=e;var n,o=Z.options;if((n=e)===document?G=!0:e.animated||p(e,Z.el)||(G=!1),e.sortable){if(e.sortable.options.group.put.indexOf(Z.options.group.name)>-1){var r=o.ghostClass;S(e,"sortable-ghost",!0),Z.options.onMove&&k(Z.el,"move",{to:e,target:t.target})}}else e!==Z.el&&(G=!0);G?k(Z.el,"spill",{to:e,target:t.target}):$&&k($.el,"over",$.el.children)}else t.preventDefault()}function Mt(t){if($){var e=$.el,n=Z.options;S(e,n.ghostClass,!1),k(e,"drop",{target:t.target,item:Q,from:Z.el}),$.sortable.options.group.put.indexOf(Z.options.group.name)>-1&&!Q.animated&&$.sortable.options.onAdd({item:Q,from:Z.el}),_t(t)}}function Ot(t){var e,n=t.type;if("touchend"===n||"touchcancel"===n||"mouseup"===n)if(H)t.preventDefault(),t.stopPropagation(),Mt(),H=!1;else if(Q){S(Q,"sortable-drag",!1),Q.removeAttribute("style");var o=P.children,r=Array.prototype.indexOf.call(o,Q);k(P,"update",{item:Q,oldIndex:Q.sortableStartData.index,newIndex:r}),k(P,"sort",{item:Q,oldIndex:Q.sortableStartData.index,newIndex:r}),Z._onUpdate&&Z._onUpdate.call(Z,{item:Q,oldIndex:Q.sortableStartData.index,newIndex:r}),Z._onSort&&Z._onSort.call(Z,{item:Q,oldIndex:Q.sortableStartData.index,newIndex:r})}else Q=null;k(Z.el,"end",{item:Q,from:Z.el}),_t(t)}if(W)return V=g(P),W=!1,void v(L.children,U);if(!G){var i=u(L.drag,L.children);if(i){var a=f(g(i),L.children);if(L.lastSlide)return void(L.lastSlide=null);if(a){if(a.animated)return;var l=L.children.indexOf(a);if(l>L.children.indexOf(L.drag))L.el.insertBefore(L.drag.node,L.children[l+1]?L.children[l+1].node:null);else L.el.insertBefore(L.drag.node,a.node),L.lastSlide=a}}else if(L.el.lastElementChild!==g(L.drag))L.el.appendChild(g(L.drag))}}function kt(t,e){for(var n=0;n<t.length;n++)e(t[n])}return St.prototype={constructor:St,_onTap:function(t){var e,n=t.target,o=this.options,r=o.handle;if(n=O(n,o.draggable,this.el))if(n.animated)t.preventDefault();else if(!(r&&!O(t.target,r,n))&&n.parentNode===this.el){at={x:t.screenX,y:t.screenY},lt=at,Q=n,P=this.el,e=this,setTimeout(function(){S(n,o.chosenClass,!0),e.options.onChoose&&e.options.onChoose.call(e,{item:n})},o.delay)}},_onDragOver:function(t){if(Q){t.preventDefault(),t.stopPropagation(),t.dataTransfer.dropEffect="move";var e=t.target,n=this.el,o=this.options.group;if(e.sortable){if(o.put.indexOf(e.sortable.options.group.name)<0)return;if(e.sortable.options.group.pull.indexOf(o.name)<0)return}if(n.contains(e))this.options.onMove?this.options.onMove.call(this,t):k(n,"move",{from:P,to:n,item:Q});else{var r=O(e,"[sortablejs-group]",document);r&&this.options.onMove?this.options.onMove.call(this,t):k(n,"spill",{from:P,to:r||e,item:Q})}}},_onDrop:function(t){if(t.preventDefault(),t.stopPropagation(),t.dataTransfer.files.length)return void console.log("files are not supported yet");var e,n=this.el,o=t.target,r=this.options,i=Q.sortableStartData;if((e=t.dataTransfer.getData("text"))&&(/^javascript:/.test(e)||console.log("something is wrong with dragged data, maybe it is a file?")),n.contains(o)){var a,l,s=O(o,r.draggable,n);if(s){l=n.children;var d=Array.prototype.indexOf.call(l,s);return k(n,"update",{item:Q,oldIndex:i.index,newIndex:d}),void k(n,"sort",{item:Q,oldIndex:i.index,newIndex:d})}a=n.children.length,k(n,"add",{item:Q,from:P,newIndex:a})}else(l=(a=n.children).length,k(n,"add",{item:Q,from:P,newIndex:l}))}},destroy:function(){var t=this.el;t.sortable=null,E(t,"sortable-js"),wt(t,this.nativeDraggable)},toArray:function(){for(var t=[],e=this.el.children,n=0,o=e.length,r=this.options.dataIdAttr;n<o;n++)t.push(e[n].getAttribute(r));return t},sort:function(t){var e={},n=this.el,o=this.options.dataIdAttr;kt(n.children,function(t){e[t.getAttribute(o)]=t}),kt(t,function(t){n.appendChild(e[t])})},closest:function(t,e){return O(t,e,this.el)},option:function(t,e){var n=this.options;if(void 0===e)return n[t];n[t]=e},on:function(t,e){this.el.addEventListener(t,!1,e)},off:function(t,e){this.el.removeEventListener(t,!1,e)}},St.utils={on:function(t,e,n){t.addEventListener(e,n,!1)},off:function(t,e,n){t.removeEventListener(e,n,!1)},css:C,find:x,bind:function(t,e){return function(){t.apply(e,arguments)}},is:function(t,e){return!!O(t,e,t)},closest:O,toggleClass:S,clone:function(t){var e=t.cloneNode(!0);return e.removeAttribute("id"),e},index:function(t){for(var e=t.parentNode.children,n=0;e[n]!==t;)n++;return n}},St.version="1.0.0-rc1",St.create=function(t,e){return new St(t,e)},St});
//# sourceMappingURL=sortable.min.js.map
